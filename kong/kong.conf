# Kong configuration file
# See https://docs.konghq.com/gateway/latest/reference/configuration/

# Database settings
database = postgres
pg_host = postgres
pg_port = 5432
pg_user = kong
pg_password = kongpass
pg_database = kong

# Proxy settings
proxy_listen = 0.0.0.0:8000
admin_listen = 0.0.0.0:8001

# Logging
proxy_access_log = /dev/stdout
admin_access_log = /dev/stdout
proxy_error_log = /dev/stderr
admin_error_log = /dev/stderr

# Custom Lua plugins
plugins = bundled,lunar-gateway
lua_package_path = /usr/local/kong/custom-plugins/?.lua;/usr/local/kong/custom-plugins/?/init.lua;;

# Nginx settings for large request bodies
nginx_http_client_max_body_size = 10m
nginx_http_client_body_buffer_size = 10m

# Disable gzip for accurate response capture
nginx_http_gzip = off

# Timeout settings for long-running LLM requests with extended reasoning
# Based on benchmarks: high-reasoning requests can take 13+ minutes
# Setting to 30 minutes to provide safety margin
upstream_connect_timeout = 1800000  # 30 minutes (1,800,000 ms)
upstream_send_timeout = 1800000     # 30 minutes
upstream_read_timeout = 1800000     # 30 minutes
